<div class="git-wiki-page">
  <section>

    {% include git-wiki/sections/tools/tools.html %}

    {% include git-wiki/components/toc/toc.html %}

    {% if site.inc_before_content %}
    {% include {{ site.inc_before_content }} %}
    {% endif %}

    <div id="git-wiki-content">
        {% assign contentarray = page.content | split:'[//begin]: # "Autogenerated link references for markdown compatibility"' %}
        {% assign autolinks = contentarray[1] | lstrip | remove:'[//end]: # "Autogenerated link references"' | rstrip | split:'[' %}
    
        {% for item in autolinks %}
            {% assign markdown_link = item | split:']:' %}
            {% assign link_name = markdown_link[0] %}
            {% assign url_and_title = markdown_link[1] | split:' "' %}
            {% assign url = url_and_title[0] | remove:'.md' %}
            {% assign title = url_and_title[1] | remove:'"' | strip_newlines %}
            {% assign result = site.pages | where: 'title',title %}
    
            {% if forloop.index == 2 %}
                {% assign md_links = link_name %}
                {% assign urls = result[0].url %}
                {% assign titles = title %}
            {% else %}
                {% assign md_links = md_links | append: ',' | append: link_name %}
                {% assign urls = urls | append: ',' | append: result[0].url %}
                {% assign titles = titles | append: ',' | append: title %}
            {% endif %}
        {% endfor %}
    
        {%  assign md_links_array = md_links |  split:',' %}
        {%  assign titles_array = titles |  split:',' %}
        {% assign urlarray = urls | split:',' %}
    
        {% assign replacedcontent = page.content %}
        {% for item in md_links_array %}
            {% if urlarray[forloop.index0] != "_" %}
                {% assign linktext = '<a href="' | append: site.baseurl | append: urlarray[forloop.index0] | append: '">' | append: titles_array[forloop.index0] | append: '</a>' %}
                {% assign bracketlink = '[[' | append: item | append: ']]' %}
                {% assign replacedcontent = replacedcontent | replace: bracketlink,linktext %}
            {% endif %}
        {% endfor %}
    
        {{ replacedcontent | markdownify }}
    </div>

    {% if site.inc_after_content %}
    {% include {{ site.inc_after_content }} %}
    {% endif %}
  </section>
</div>